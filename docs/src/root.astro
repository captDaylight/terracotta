---
import renderMeta from './internal/meta/render-meta';
import { LoadResult } from './internal/router';
import PageRouter from './page-router';

interface Props {
  data: LoadResult<any>[];
}

const lastData = Astro.props.data[Astro.props.data.length - 1];

---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {lastData && 'meta' in lastData && <Fragment set:html={renderMeta(lastData)} />}
    <style is:global>
      .dynamic-shadow {
        position: relative;
      }

      .dynamic-shadow:after {
        content: "";
        width: 100%;
        height: 100%;
        position: absolute;
        background: inherit;
        top: 0.5rem;
        filter: blur(0.4rem);
        opacity: 0.7;
        z-index: -1;
      }

      .gutter {
        background: white;
        background-repeat: no-repeat;
        background-position: 50%;
      }

      .dark .gutter {
        background-color: black;
      }

      .gutter.gutter-horizontal {
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
        cursor: col-resize;
      }

      .gutter.gutter-vertical {
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=');
        cursor: row-resize;
      }

      .shiki {
        @apply p-4 overflow-x-auto float-left min-w-full text-sm;
      }
    </style>
  </head>
  <body>
    <PageRouter
      client:load
      data={Astro.props.data}
      pathname={Astro.url.pathname}
      search={Astro.url.search}
    />
  </body>
</html>
